<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="language" content="en">
    <title>ICT Syllabus - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Import Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Iskoola+Pota&display=swap');
        /* Import Teko font for the main title */
        @import url('https://fonts.googleapis.com/css2?family=Teko:wght@300..700&display=swap');


        /* Dark Theme Base styles */
        body {
            font-family: 'Poppins', sans-serif;
            padding: 1rem 1.5rem 100px 1.5rem;
            background: linear-gradient(145deg, #000000 0%, #1a1a1a 70%, #2c2c2c 100%);
            color: #ffffff; /* White text */
            transition: background 0.5s ease-in-out;
            overflow-x: hidden; margin: 0; min-height: 100vh;
        }
        body.lang-si { font-family: 'Iskoola Pota', 'Poppins', sans-serif; }

        /* Matrix Canvas Styling */
        #matrix-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; display: block; opacity: 0.08; }

        /* Main Container */
        .main-container { position: relative; width: 100%; max-width: 1200px; margin: 0 auto; }
        .main-container > * { position: relative; z-index: 1; }

        /* Header Styling */
        header {
            position: relative; /* Added position relative for absolute positioning of time/date */
            margin-bottom: 8px;
            text-align: center;
            border-bottom: 1px solid rgba(107, 114, 128, 0.5);
            padding-bottom: 6px;
            padding-top: 4px;
        }

        /* Header Title Styling */
        #main-title {
            font-family: 'Teko', sans-serif; /* Applied Teko font */
            color: #ffffff;
            background: none;
            -webkit-background-clip: unset;
            background-clip: unset;
            -webkit-text-fill-color: unset;
            /* Animation */
            animation: pulse-glow 2s infinite alternate;
        }

        /* Keyframes for pulse-glow animation */
        @keyframes pulse-glow {
            0% {
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.3), 0 0 10px rgba(255, 255, 255, 0.2);
            }
            100% {
                text-shadow: 0 0 10px rgba(20, 184, 166, 0.6), 0 0 20px rgba(20, 184, 166, 0.4);
            }
        }

         #main-subtitle { color: #cbd5e1; }


        /* Lesson Grid */
        .lesson-grid {
            display: grid;
            gap: 1rem; /* Reduced gap */
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Reduced min width */
            margin-top: 2rem;
        }

        /* Lesson Button Styling */
        .lesson-button {
            display: flex;
            flex-direction: column; /* Stack content vertically */
            align-items: center;
            justify-content: center;
            padding: 1.5rem; /* Slightly increased padding for card feel */
            background: rgba(42, 42, 42, 0.6);
            border: 1px solid rgba(75, 85, 99, 0.4);
            border-radius: 0.75rem;
            text-align: center;
            text-decoration: none;
            color: #e5e7eb;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease-in-out, background 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease, opacity 0.3s ease, filter 0.3s ease; /* Added transitions for more properties, including opacity and filter */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative; /* Needed for z-index and positioning overlay */
            z-index: 1; /* Default z-index */
            opacity: 1; /* Default opacity */
        }

        /* Blur effect on other buttons when one is hovered */
        .lesson-grid:hover .lesson-button:not(:hover) {
            opacity: 0.5; /* Reduced opacity for non-hovered buttons */
            filter: blur(3px); /* Apply blur effect */
        }


        .lesson-button:hover {
            background: rgba(20, 184, 166, 0.2); /* Subtle teal background on hover */
            border-color: #14b8a6; /* Teal border on hover */
            color: #99f6e4; /* Lighter teal text on hover */
            transform: translateY(-10px) scale(1.05) rotateZ(1deg); /* More pronounced lift, scale, and subtle rotation */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5); /* Increased shadow on hover */
            z-index: 10; /* Bring hovered card to front */
            opacity: 1; /* Ensure hovered button is fully opaque */
            filter: none; /* Remove blur effect on hover */
        }

         /* Styling for the unit number span */
         .lesson-button span {
             font-size: 1.8rem; /* Slightly larger font size for number */
             margin-bottom: 0.6rem; /* Adjusted margin */
             color: #14b8a6; /* Teal color for numbers */
             font-weight: 700; /* Make the number bold */
             transition: color 0.3s ease; /* Added transition for number color */
         }

         .lesson-button:hover span {
             color: #99f6e4; /* Match text color on hover */
         }

         /* Subtopic Overlay Styling */
         /* Removed Subtopic Overlay Styling as the element is removed */


        /* Bottom Dashboard Styling */
        #bottom-dashboard { position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%); z-index: 100; width: auto; background: rgba(10, 10, 10, 0.75); backdrop-filter: blur(12px); border: 1px solid rgba(50, 50, 50, 0.6); border-radius: 9999px; padding: 0.4rem 0.6rem; display: flex; justify-content: center; align-items: center; gap: 0.5rem; box-shadow: 0 5px 20px rgba(0,0,0,0.4); opacity: 0; transform: translateX(-50%) translateY(120%); transition: opacity 0.4s ease-out, transform 0.4s ease-out; pointer-events: none; }
        #bottom-dashboard.visible { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }
        @media (min-width: 640px) { #bottom-dashboard { gap: 0.65rem; } }
        .dashboard-section { display: flex; align-items: center; gap: inherit; }
        .dashboard-button { width: 2.25rem; height: 2.25rem; font-size: 1rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: normal; line-height: 1; color: #a0a0a0; background-color: transparent; border: none; box-shadow: none; transition: all 0.2s ease-out; cursor: pointer; text-decoration: none; opacity: 0.8; }
        @media (min-width: 768px) { .dashboard-button { width: 2.5rem; height: 2.5rem; font-size: 1.1rem; } #home-btn { width: 3rem; height: 3rem; font-size: 1.3rem; margin: 0 0.25rem; } } /* Adjusted home-btn size and margin */
        .dashboard-button:hover { background-color: rgba(55, 55, 55, 0.6); color: #f0f0f0; transform: scale(1.1); opacity: 1; }
        .dashboard-button:active { background-color: rgba(20, 184, 166, 0.2); }
        #home-btn { background: linear-gradient(145deg, #14b8a6, #0d9488); color: white; box-shadow: 0 4px 12px rgba(13, 148, 136, 0.4); opacity: 1; } /* Removed margin from here */
        #home-btn:hover { background: linear-gradient(145deg, #0d9488, #047857); box-shadow: 0 6px 18px rgba(13, 148, 136, 0.5); transform: scale(1.05); }
        #translate-btn { font-weight: 600; font-size: 0.75rem; color: #a0a0a0; width: 2.25rem; height: 2.25rem; }
        @media (min-width: 768px) { #translate-btn { font-size: 0.85rem; width: 2.5rem; height: 2.5rem; } }
        #translate-btn:hover { color: #f0f0f0; }
        #fullscreen-btn i { font-size: 0.9rem; } /* Adjusted selector */
        @media (min-width: 768px) { #fullscreen-btn i { font-size: 1rem; } } /* Adjusted selector */

        /* Admin Dashboard Button (Gear Icon) - Hidden on Home */
        #admin-dashboard-btn { display: none !important; }


        /* Admin Logout Button - Hidden on Home */
        #admin-logout-btn { display: none !important; }


        /* Footer Styles */
        .app-footer {
            padding: 1.5rem 1rem;
            text-align: center;
            font-size: 0.8rem;
            color: #6b7280;
            width: 100%;
            margin-top: 3rem; /* Added margin to separate from grid */
        }
        .app-footer a { color: #9ca3af; text-decoration: none; transition: color 0.2s ease; }
        .app-footer a:hover { color: #5eead4; text-decoration: none; }

         /* About Section */
         .about-section {
             margin-top: 3rem;
             padding-top: 2rem;
             border-top: 1px solid rgba(75, 85, 99, 0.4);
             color: #a0a0a0;
             font-size: 0.9rem;
             line-height: 1.6;
         }
         .about-section h3 {
             font-size: 1.2rem;
             font-weight: 600;
             color: #ffffff;
             margin-bottom: 1rem;
             text-align: center;
         }
         .about-section p {
             margin-bottom: 1rem;
             max-width: 800px;
             margin-left: auto;
             margin-right: auto;
         }

         /* Contact Section */
         .contact-section {
             margin-top: 2rem;
             padding-top: 2rem;
             border-top: 1px solid rgba(75, 85, 99, 0.4);
             color: #a0a0a0;
             font-size: 0.9rem;
             text-align: center;
         }
         .contact-section h3 {
             font-size: 1.2rem;
             font-weight: 600;
             color: #ffffff;
             margin-bottom: 1rem;
         }
         .contact-section p {
             margin-bottom: 0.5rem;
         }
         .contact-section a {
             color: #14b8a6;
             text-decoration: none;
             transition: color 0.2s ease;
         }
         .contact-section a:hover {
             color: #0d9488;
             text-decoration: underline;
         }


        /* Helper class to hide elements */
        .hidden { display: none; }


    </style>
</head>
<body class="theme-dark min-h-screen p-4 md:p-8">
    <canvas id="matrix-canvas"></canvas>

    <div class="main-container">

        <header class="mb-8 text-center border-b border-gray-700/50 pb-6 pt-4">
            <h1 id="main-title" data-key="main_title" class="text-3xl md:text-4xl font-bold text-white mb-2">ICT SYLLABUS</h1>
            <p id="main-subtitle" data-key="main_subtitle" class="text-gray-400 mt-2 text-base md:text-lg">Select a unit to explore the lessons.</p>
            </header>

        <main class="lesson-grid">
            <a href="unit1.html" class="lesson-button" data-key="btn_1">
                <span>1</span> Unit 1: Concept of ICT
            </a>
            <a href="unit2.html" class="lesson-button" data-key="btn_2">
                <span>2</span> Unit 2: Introduction to Computer
            </a>
            <a href="unit3.html" class="lesson-button" data-key="btn_3">
                <span>3</span> Unit 3: Data Representation
            </a>
            <a href="unit4.html" class="lesson-button" data-key="btn_4">
                <span>4</span> Unit 4: Fundamental of Digital Circuits
            </a>
            <a href="unit5.html" class="lesson-button" data-key="btn_5">
                <span>5</span> Unit 5: Computer Operating System
            </a>
             <a href="unit6.html" class="lesson-button" data-key="btn_6">
                <span>6</span> Unit 6: Data Communication and Networking
            </a>
             <a href="unit7.html" class="lesson-button" data-key="btn_7">
                <span>7</span> Unit 7: System Analysis and Design
            </a>
             <a href="unit8.html" class="lesson-button" data-key="btn_8">
                <span>8</span> Unit 8: Database Management
            </a>
             <a href="unit9.html" class="lesson-button" data-key="btn_9">
                <span>9</span> Unit 9: Programming
            </a>
             <a href="unit10.html" class="lesson-button" data-key="btn_10">
                <span>10</span> Unit 10: Web Development
            </a>
             <a href="unit11.html" class="lesson-button" data-key="btn_11">
                <span>11</span> Unit 11: Internet of Things
            </a>
             <a href="unit12.html" class="lesson-button" data-key="btn_12">
                <span>12</span> Unit 12: ICT in Business
            </a>
             <a href="unit13.html" class="lesson-button" data-key="btn_13">
                <span>13</span> Unit 13: New trends and Future Directions of ICT
            </a>
             </main>

        <footer class="app-footer">
            <a href="https://t.me/MR_LXN" target="_blank" rel="noopener noreferrer">
                 </> Developed by Lakshan ðŸ’»
            </a>
        </footer>

    </div>

    <footer id="bottom-dashboard">
        <div class="dashboard-section">
            <button id="translate-btn" data-lang="si" class="dashboard-button" aria-label="Translate"> SI </button>
            <button id="fullscreen-btn" class="dashboard-button" aria-label="Toggle Fullscreen">
                <i id="fullscreen-enter-icon" class="fas fa-expand"></i>
                <i id="fullscreen-exit-icon" class="fas fa-compress hidden"></i>
            </button>
            </div>
    </footer>


    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.0/firebase-auth.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script>
        // --- Firebase Configuration ---
        const firebaseConfig = {
           apiKey: "AIzaSyAJg4Pu1qEsZTg2QRiGZQgU4z-2lw8-Wrk",
           authDomain: "deeplearnsl.firebaseapp.com",
           databaseURL: "https://deeplearnsl-default-rtdb.firebaseio.com",
           projectId: "deeplearnsl",
           storageBucket: "deeplearnsl.appspot.com",
           messagingSenderId: "372545200514",
           appId: "1:372545200514:web:29fe509e65ff575b2c2f9b"
        };

        // --- Initialize Firebase ---
        // Initialize Firebase only if it hasn't been initialized yet
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
             // Note: database and auth are not strictly needed on the index page for basic functionality,
             // but are included for consistency if future features require them.
             // let database = firebase.database();
             // let auth = firebase.auth();
            console.log("Firebase initialized successfully.");
        } catch (e) {
            console.error("Error initializing Firebase:", e);
            // No alert needed on the home page if database connection fails, as it's not critical here.
        }


        // --- Translation Data for Index Page ---
        const translations = {
             en: {
                 main_title: "ICT SYLLABUS", // Updated title here
                 main_subtitle: "Select a unit to explore the lessons.",
                 btn_1: "Unit 1: Concept of ICT",
                 btn_2: "Unit 2: Introduction to Computer",
                 btn_3: "Unit 3: Data Representation",
                 btn_4: "Unit 4: Fundamental of Digital Circuits",
                 btn_5: "Unit 5: Computer Operating System",
                 btn_6: "Unit 6: Data Communication and Networking",
                 btn_7: "Unit 7: System Analysis and Design",
                 btn_8: "Unit 8: Database Management",
                 btn_9: "Unit 9: Programming",
                 btn_10: "Unit 10: Web Development",
                 btn_11: "Unit 11: Internet of Things",
                 btn_12: "Unit 12: ICT in Business",
                 btn_13: "Unit 13: New trends and Future Directions of ICT"
             },
             si: { /* Sinhala translations */
                 main_title: "à¶­à·œà¶»à¶­à·”à¶»à·” à·„à· à·ƒà¶±à·Šà¶±à·’à·€à·šà¶¯à¶± à¶­à·à¶šà·Šà·‚à¶« à·€à·’à·‚à¶º à¶±à·’à¶»à·Šà¶¯à·šà·à¶º", // Update Sinhala translation if needed
                 main_subtitle: "à¶´à·à¶©à¶¸à·Š à¶œà·€à·šà·‚à¶«à¶º à¶šà·’à¶»à·“à¶¸à¶§ à¶’à¶šà¶šà¶ºà¶šà·Š à¶­à·à¶»à¶±à·Šà¶±.",
                 btn_1: "à¶’à¶šà¶šà¶º 1: à¶­à·œà¶»à¶­à·”à¶»à·” à·„à· à·ƒà¶±à·Šà¶±à·’à·€à·šà¶¯à¶± à¶­à·à¶šà·Šà·‚à¶«à¶ºà¶§ à·„à·à¶³à·’à¶±à·Šà·€à·“à¶¸",
                 btn_2: "à¶’à¶šà¶šà¶º 2: à¶´à¶»à·’à¶œà¶«à¶š à¶´à¶¯à·Šà¶°à¶­à·’",
                 btn_3: "à¶’à¶šà¶šà¶º 3: à¶¯à¶­à·Šà¶­ à¶±à·’à¶»à·–à¶´à¶«à¶º",
                 btn_4: "à¶’à¶šà¶šà¶º 4: à¶©à·’à¶¢à·’à¶§à¶½à·Š à¶´à¶»à·’à¶´à¶®à·€à¶½ à¶¸à·–à¶½à·’à¶š à¶šà¶»à·”à¶«à·”",
                 btn_5: "à¶’à¶šà¶šà¶º 5: à¶´à¶»à·’à¶œà¶«à¶š à¶¸à·™à·„à·™à¶ºà·”à¶¸à·Š à¶´à¶¯à·Šà¶°à¶­à·’",
                 btn_6: "à¶’à¶šà¶šà¶º 6: à¶¯à¶­à·Šà¶­ à·ƒà¶±à·Šà¶±à·’à·€à·šà¶¯à¶±à¶º à·ƒà·„ à¶¢à·à¶½à¶šà¶»à¶«à¶º",
                 btn_7: "à¶’à¶šà¶šà¶º 7: à¶´à¶¯à·Šà¶°à¶­à·’ à·€à·’à·à·Šà¶½à·šà·‚à¶«à¶º à·ƒà·„ à·ƒà·à¶½à·ƒà·”à¶¸à·Š à¶šà·’à¶»à·“à¶¸",
                 btn_8: "à¶’à¶šà¶šà¶º 8: à¶¯à¶­à·Šà¶­ à·ƒà¶¸à·”à¶¯à· à¶šà·…à¶¸à¶±à·à¶šà¶»à¶«à¶º",
                 btn_9: "à¶’à¶šà¶šà¶º 9: à¶šà·Šâ€à¶»à¶¸à¶½à·šà¶›à¶±à¶º",
                 btn_10: "à¶’à¶šà¶šà¶º 10: à·€à·™à¶¶à·Š à·ƒà¶‚à·€à¶»à·Šà¶°à¶±à¶º",
                 btn_11: "à¶’à¶šà¶šà¶º 11: à¶…à¶±à·Šà¶­à¶»à·Šà¶¢à·à¶½à¶º à¶”à·ƒà·Šà·ƒà·š à¶¯à·šà·€à¶½à·Š",
                 btn_12: "à¶’à¶šà¶šà¶º 12: à·€à·Šâ€à¶ºà·à¶´à·à¶»à¶ºà·š à¶­à·œà¶»à¶­à·”à¶»à·” à·„à· à·ƒà¶±à·Šà¶±à·’à·€à·šà¶¯à¶± à¶­à·à¶šà·Šà·‚à¶«à¶º",
                 btn_13: "à¶’à¶šà¶šà¶º 13: à¶±à·€ à¶´à·Šâ€à¶»à·€à¶«à¶­à· à·ƒà·„ à¶…à¶±à·à¶œà¶­ à¶¯à·’à·à·à·€à¶±à·Š"
             }
        };


        // --- UI Elements ---
        const translateButton = document.getElementById('translate-btn');
        const fullscreenButton = document.getElementById('fullscreen-btn');
        const fullscreenEnterIcon = document.getElementById('fullscreen-enter-icon');
        const fullscreenExitIcon = document.getElementById('fullscreen-exit-icon');
        const bottomDashboard = document.getElementById('bottom-dashboard');
        const bodyElement = document.body;
        const translatableElements = document.querySelectorAll('[data-key]');


        // --- Translation Logic ---
        function setLanguage(lang) {
            console.log(`Setting language to: ${lang}`);
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang]?.[key]) {
                    // Handle a tags (lesson buttons)
                    if (element.tagName === 'A' && element.classList.contains('lesson-button')) {
                         // Preserve the span with the number
                         const span = element.querySelector('span');
                         element.textContent = translations[lang][key];
                         if(span) element.prepend(span);
                    }
                     // Handle the syllabus PDF link
                    else if (element.tagName === 'A' && element.classList.contains('syllabus-link')) {
                         const icon = element.querySelector('i');
                         element.textContent = translations[lang][key];
                         if(icon) element.prepend(icon);
                    }
                     // Handle the user guide button specifically (removed, but keeping logic for safety)
                    else if (element.tagName === 'A' && element.classList.contains('dashboard-button') && element.getAttribute('href') === 'user_guide.html') {
                         const icon = element.querySelector('i');
                         element.textContent = translations[lang][key];
                         if(icon) element.prepend(icon);
                    }
                    else {
                         element.textContent = translations[lang][key];
                    }
                }
            });

            const nextLangCode = lang === 'en' ? 'SI' : 'EN';
            translateButton.textContent = nextLangCode;
            translateButton.setAttribute('data-lang', lang === 'en' ? 'si' : 'en');
            bodyElement.classList.remove('lang-en', 'lang-si');
            bodyElement.classList.add(`lang-${lang}`);

            // Update the user guide button text specifically if it exists (logic remains but button is removed)
            const userGuideButton = document.querySelector('.dashboard-button[href="user_guide.html"]');
            if (userGuideButton && translations[lang]?.user_guide_button_text) {
                 // Check if the button already has an icon before prepending
                 const icon = userGuideButton.querySelector('i');
                 userGuideButton.textContent = translations[lang].user_guide_button_text;
                 if(icon) userGuideButton.prepend(icon);
            }
        }

        // --- Translate Button Event Listener ---
        translateButton.addEventListener('click', () => {
            const targetLang = translateButton.getAttribute('data-lang');
            console.log("Translate button clicked. Target language:", targetLang);
            setLanguage(targetLang);
        });

        // --- Fullscreen Toggle Logic ---
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        function updateFullscreenButtonIcon() {
            if (document.fullscreenElement) {
                fullscreenEnterIcon.classList.add('hidden');
                fullscreenExitIcon.classList.remove('hidden');
            } else {
                fullscreenEnterIcon.classList.remove('hidden');
                fullscreenExitIcon.classList.add('hidden');
            }
        }

        fullscreenButton.addEventListener('click', toggleFullScreen);
        document.addEventListener('fullscreenchange', updateFullscreenButtonIcon);

        // --- Auto-Hide Dashboard Logic ---
        let dashboardTimeout;
        let lastScrollTop = 0;
        const dashboardHideDelay = 6000;
        const scrollThreshold = 10;

        function showDashboard() {
            bottomDashboard.classList.add('visible');
            clearTimeout(dashboardTimeout);
            dashboardTimeout = setTimeout(() => {
                if (!bottomDashboard.matches(':hover')) {
                     bottomDashboard.classList.remove('visible');
                }
            }, dashboardHideDelay);
        }

        function hideDashboard() {
            clearTimeout(dashboardTimeout);
            bottomDashboard.classList.remove('visible');
        }

        // Show dashboard initially
        showDashboard();

        // Handle scroll direction
        window.addEventListener('scroll', () => {
            let currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (Math.abs(currentScrollTop - lastScrollTop) <= scrollThreshold) return;
            if (currentScrollTop > lastScrollTop) hideDashboard();
            else showDashboard();
            lastScrollTop = currentScrollTop <= 0 ? 0 : currentScrollTop;
        }, { passive: true });

        // Reset timer and show dashboard on other interactions
        ['mousemove', 'touchstart'].forEach(eventType => {
            window.addEventListener(eventType, showDashboard, { passive: true });
        });

        // Keep dashboard visible while hovering over it
        bottomDashboard.addEventListener('mouseenter', () => clearTimeout(dashboardTimeout));
        bottomDashboard.addEventListener('mouseleave', () => { if (bottomDashboard.classList.contains('visible')) showDashboard(); });


        // --- Matrix Background Effect ---
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        let matrixInterval;

        function setupMatrix() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const columns = canvas.width / font_size;
            drops = [];
            for (let x = 0; x < columns; x++) drops[x] = 1;
        }

        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890@#$%^&*()*&^%+-=/".split('');
        const font_size = 12;
        let drops = [];

        function drawMatrix() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.04)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "rgba(229, 231, 235, 0.8)";
            ctx.font = font_size + "px monospace";
            for (let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                ctx.fillText(text, i * font_size, drops[i] * font_size);
                if (drops[i] * font_size * 0.9 > canvas.height && Math.random() > 0.975) drops[i] = 0; // Adjusted drop reset
                drops[i]++;
            }
        }

        function startMatrix() {
            setupMatrix();
            if (matrixInterval) clearInterval(matrixInterval);
            matrixInterval = setInterval(drawMatrix, 50);
        }

        window.addEventListener('resize', setupMatrix);


        // --- Initial Setup ---
        document.addEventListener('DOMContentLoaded', () => { // Wait for DOM to be ready
            const initialLang = 'en';
            setLanguage(initialLang); // Apply initial translations
            startMatrix(); // Enable matrix effect by default
            updateFullscreenButtonIcon(); // Set initial fullscreen icon state
        });

    </script>

</body>
</html>
